---
import { Icon } from 'astro-icon'
---

<script>
    const res = await fetch('https://api.github.com/repos/palera1n/palera1n');
    const data = await res.json();
    const stars = data.stargazers_count;

    const stars_element: HTMLElement | null = document.getElementById("stars_element");
    if (stars_element) {
        stars_element.innerHTML = stars_element.innerHTML.replace('starsHere', stars);
    }

    const mobile_menu_button: HTMLElement | null = document.getElementById("mobile_menu_button");
    const mobile_menu: HTMLElement | null = document.getElementById("mobile_menu");
    const open_svg: HTMLElement | null = document.getElementById("open_svg");
    const close_svg: HTMLElement | null = document.getElementById("close_svg");

    if (mobile_menu_button && mobile_menu) {
        mobile_menu_button.addEventListener("click", () => {
            mobile_menu.classList.toggle("hidden");
            
            if (open_svg && close_svg) {
                open_svg.classList.toggle("hidden");
                close_svg.classList.toggle("hidden");
            }
        });
    }
</script>

<header>
    <nav class="bg-white border-gray-200 px-2 lg:px-3 py-2.5 dark:bg-gray-800">
        <div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl">
            <a href="/" class="flex items-center no-underline">
                <img src="/favicon.png" class="mr-3 h-6 sm:h-9" alt="palera1n" />
                <span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white max-[275px]:hidden">palera1n</span>
            </a>
            <div class="flex items-center lg:order-2">
                <a href="https://github.com/palera1n/palera1n/stargazers" id="stars_element" class="text-gray-800 dark:text-white hover:bg-gray-50 focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-4 lg:px-5 py-2 lg:py-2.5 mr-2 dark:hover:bg-gray-700 focus:outline-none dark:focus:ring-gray-800 no-underline inline transition-[background-color] duration-[0.2s] ease-[ease-in-out]">
                    <Icon pack="mdi" name="star" class="fill-gray-800 dark:fill-white h-[1.4em] inline" /> starsHere
                </a>
            </div>
            <div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:left-1/2 lg:-translate-x-1/2 lg:absolute" id="mobile_menu">
                <ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0">
                    <li><a href="https://discord.gg/palera1n" class="block py-2 pr-3 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700 no-underline transition-[color] duration-[0.2s] ease-[ease-in-out]">Discord</a></li>
                    <li><a href="https://twitter.com/palera1n" class="block py-2 pr-3 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700 no-underline transition-[color] duration-[0.2s] ease-[ease-in-out]">Twitter</a></li>
                    <li><a href="https://github.com/palera1n" class="block py-2 pr-3 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700 no-underline transition-[color] duration-[0.2s] ease-[ease-in-out]">GitHub</a></li>
                </ul>
            </div>
        </div>
    </nav>
</header>
